$(document).ready(function(){$("[data-lagom-href]").on("click",function(e){e.preventDefault(),$(e.currentTarget).is("form")||(document.location.href=$(this).data("lagom-href"))}),$("[submit-form]").on("click",function(){$(this).closest("form").submit()}),$("#subaccountActivate input").on("ifToggled",function(e){$("#subacct-container").collapse("toggle")}),$("#inputAllowSso").on("change",function(){var e=$(this).closest(".panel-switch").find(".loader");e.fadeIn(400),WHMCS.http.jqClient.post("clientarea.php",jQuery("#frmSingleSignOn").serialize()).promise().done(function(){e.fadeOut(400)})}),$(document).on("click","[data-trigger-click]",function(e){e.preventDefault;var t=$(this).data("target");$("body").find(t).trigger("click")}),$("[data-form]").on("click",function(e){e.preventDefault;var t=$(this).data("form");$("body").find(t).submit()});var e=$(".list-group-tab-nav, .page-clientareadomaindetails #Overview"),t=$.extend({getHashCallback:function(e){return e}});if($("a",e).on("click",function(){if("tab"===$(this).data("toggle")){var a=this.hash,i=a?'a[href*="'+a+'"]':"li:first-child > a",n=a.replace("tab","");$(e).find(".active").removeClass("active"),$("body").find(i).addClass("active"),$("body").find(n).addClass("active").siblings(".tab-pane").removeClass("active"),window.location.hash=t.getHashCallback(a)}}),window.location.hash&&e.length>0){var a=window.location.hash,i=a?'a[href*="'+a+'"]':"li:first-child > a";$("body").find(i).addClass("active");var n=a.replace("tab","");$("body").find(n).addClass("active").siblings(".tab-pane").removeClass("active")}if($(document).on("click","[data-btn-loader]",function(){$(this).find("span").not(".loader").addClass("invisible"),$(this).find(".loader").removeClass("hidden")}),$(document).on("click",".btn-checkout",function(){var e=$(this).prop("id");"submit"==$(this).attr("type")&&"btnCompleteProductConfig"!=e&&($(this).closest("form").submit(),$(".btn-checkout").addClass("disabled").prop("disabled",!0))}),$("[data-cc-popover-show]").on("mouseenter",function(){$(this).siblings("[data-cc-popover]").addClass("fade in").show()}),$("[data-cc-popover-show]").on("mouseout",function(){$(this).siblings("[data-cc-popover]").removeClass("fade in").hide()}),$("[data-radio-tab]").on("click",function(){if("undefined"!=$(this).data("radio-target")){let e=$(this).data("radio-target");$(e).iCheck("check")}else $(this).find('input[type="radio"]').iCheck("update")}),$(".payment-form").length>0){var o=$(".payment-form").find("iframe");o.length>0?($(".modal").on("show.bs.modal",function(){$(".main-content, .main-content .sidebar, .main-content .panel-payment, .main-content .sticky-sidebar-inner").css("position","static")}),$(".modal").on("hide.bs.modal",function(){$(".main-content, .main-content .sidebar, .main-content .panel-payment, .main-content .sticky-sidebar-inner").removeAttr("style")}),$(".page-viewinvoice .main-body .payment-form > .modal").each(function(){$("body").append(this),$(this).remove})):$(".page-viewinvoice .main-body .modal").each(function(){$("body").append(this),$(this).remove});var s=$(".payment-form").data("display-button");if(s){var d=$(".payment-form").data("btntext"),r=$(".payment-form").data("btnsubscribetext");$(".payment-form").find('input[type="image"]').attr("type","submit").attr("value",d),$("#paynow").html(d).attr("style","color: #fff").addClass("btn");var c=$(".payment-form").find("form").length;if(2==c){let e=$(".payment-form").find("form:first").html(),t=$(".payment-form").find("form").eq(1).html(),a=!1,i=!1;e.length&&(a=e.includes("subscr")),t.length&&(i=t.includes("subscr")),a&&$(".payment-form").find("form:first").find('input[type="submit"]').attr("value",r),i&&$(".payment-form").find("form").eq(1).find('input[type="submit"]').attr("value",r)}}}var l=$(".btn-check-all"),m=$('.check-all-container input[type="checkbox"]').not(":disabled");if(l.on("click",function(e){e.preventDefault();var t=$(this).data("checkalltext"),a=$(this).data("uncheckalltext");$(this).hasClass("checked")?(m.iCheck("uncheck"),$(this).removeClass("checked"),$(this).text(t)):(m.iCheck("check"),$(this).addClass("checked"),$(this).text(a))}),$('input[name="canchangepin"]').closest("div").addClass("checkbox").css("margin-top","-5px"),$('input[name="canchangepin"]').iCheck({checkboxClass:"checkbox-styled",radioClass:"radio-styled",increaseArea:"40%"}),jQuery(".ssl-status.ssl-sync").each(function(){var e=jQuery(this);WHMCS.http.jqClient.post(WHMCS.utils.getRouteUrl("/domain/ssl-check"),{type:e.closest(".ssl-info").data("type"),domain:e.closest(".ssl-info").data("domain"),token:csrfToken},function(t){if(t.invalid)e.hide();else{var a=e.data("maintemplate");"undefined"==a&&(a="lagom");var i=t.image.replace("assets/img/ssl/","templates/"+a+"/assets/img/ssl/12x12/");i=i.replace(".png",".svg"),e.replaceWith('<img src="'+i+'" data-toggle="tooltip" title="'+t.tooltip+'" class="'+t.class+'">')}})}),$(".alert-dismissible").on("close.bs.alert",function(){$('[data-toggle="tooltip"]').tooltip("hide")}),$("#openTicketSubmit").on("click",function(){$(this).prop("disabled",!0),$(this).closest("form").submit()}),$('#frmDomainHomepage input[type="submit"]').on("click",function(e){e.preventDefault();var t=$('#frmDomainHomepage [name="domain"]').val();t=t.replace(/\s/g,""),$('#frmDomainHomepage [name="domain"]').val(t),$("#frmDomainHomepage").submit()}),$("#modalAjax, #modalGeneratePassword").removeAttr("style"),$("[data-fixed-actions]").luScrollTo({onScreen:function(e,t){$(e).stop().removeClass("is-fixed")},outScreen:function(e,t){$(e).stop().addClass("is-fixed")}}),$("#domain-filter").length&&$("#tableDomainPricing").length){let e=$("#domain-filter")[0].selectize,t=jQuery("#tableDomainPricing").DataTable();e.refreshOptions(!1),e.on("change",function(a){let i=e.getValue();var n=!1,o=!1,s=Object.keys(i)[Object.keys(i).length-1],d=Object.keys(i).length;if(d>0){for(const[e,t]of Object.entries(i))"All"==t&&(n=!0),s==e&&0!=e&&"All"==t&&(o=!0);!0===o?e.setValue("All",1):!0===n&&(delete i[0],e.setValue(i))}else e.setValue("All",1);var r=i.toString(),c=r.replace(/,/g,"|");"|"===c.charAt(0)&&(c=c.substring(1)),t.column(1).search(c,!0,!1).draw()})}jQuery(".list-group-item-content").on("click",function(e){var t=jQuery(e.target);return!!t.is(".dropdown-toggle, .dropdown-toggle > span, .dropdown-toggle > i, .dropdown-menu")||(t.hasClass("btn-custom-action")?(e.stopPropagation(),!!t.data("active")):(window.location.href=t.closest(".list-group-item-content").data("href"),!1))}),jQuery("").on("click",function(e){return customActionAjaxCall(e,jQuery(e.target))}),jQuery(".div-service-item").on("click",function(e){var t=jQuery(e.target);return!!t.is(".dropdown-toggle, .dropdown-menu")||(t.hasClass("btn-custom-action")?customActionAjaxCall(e,t):(window.location.href=t.closest(".div-service-item").data("href"),!1))}),jQuery(document).on("click",'.dropdown-menu[data-service-id], div[menuitemname="Service Details Actions"] a[data-identifier][data-serviceid][data-active="1"]',function(e){console.log(e);var t=jQuery(e.target);if(t.is(".dropdown-menu"))return!1;if(!t.hasClass("disabled")){if(t.attr("disabled","disabled").addClass("disabled"),jQuery(".loading",t).show(),t.data("serviceid"))return WHMCS.http.jqClient.jsonPost({url:WHMCS.utils.getRouteUrl("/clientarea/service/"+t.data("serviceid")+"/custom-action/"+t.data("identifier")),data:{token:csrfToken},success:function(e){e.success?window.open(e.redirectTo):window.open("clientarea.php?action=productdetails&id="+t.data("serviceid")+"&customaction_error=1")},fail:function(){window.open("clientarea.php?action=productdetails&id="+t.data("serviceid")+"&customaction_ajax_error=1")},always:function(){jQuery(".loading",t).hide(),t.removeAttr("disabled").removeClass("disabled"),t.hasClass("dropdown-item")&&t.closest(".dropdown-menu").removeClass("show")}}),!0;window.location.href=t.closest("[data-service-id]").data("href")}}),$(".page-clientareahome .list-group").on("scroll",function(){$("body").trigger("click")}),$(".page-clientareahome .list-group-item-dropdown").on("show.bs.dropdown",function(){var e=$(this).find(".dropdown-menu");if(window.innerWidth>619)var t=$(this).offset().left-94;else t=$(this).offset().left;$("body").append(e.css({position:"absolute",left:t,top:$(this).offset().top+36}).detach())}),$(window).on("load resize",function(){let e=$(".panel-active-services");if(e.length){let t=e.find(".list-group"),a=t.find(".list-group-item");a.innerHeight()*a.length+(a.length-1)<324?t.removeClass("has-scroll"):t.addClass("has-scroll")}}),$(".page-clientareahome .list-group-item-dropdown").on("hidden.bs.dropdown",function(){var e=$("body > [data-service-id]"),t=$("body > [data-service-id]").data("service-id");$('.list-group-item-dropdown[data-service-id="'+t+'"]').append(e.css({position:"absolute",left:"0",top:"100%"}).detach())}),$(window).on("resize",function(){$("body").hasClass("page-clientareahome")&&$("body").trigger("click")}),$("[data-auto-renew-switch]").on("click",function(e){e.preventDefault();var t=$(this),a=$(this).find(".switch__checkbox--domain"),i=a.data("action");a.prop("disabled",!0).addClass("is-loading"),t.addClass("is-loading"),t.parent().parent().parent().addClass("prevent-click"),setTimeout(function(){var e={id:a.data("domainid"),sub:a.data("domainsub"),autorenew:a.attr("data-domainautorenew"),token:a.data("token")};"disable"==a.attr("data-domainautorenew")?a.attr("data-domainautorenew","enable"):a.attr("data-domainautorenew","disable"),$.ajax({type:"POST",url:i,data:e,success:function(e){a.prop("disabled",!1).removeClass("is-loading"),t.removeClass("is-loading").removeAttr("disabled"),t.parent().parent().parent().removeClass("prevent-click"),a.is(":checked")?a.prop("checked",!1):a.prop("checked",!0)},error:function(e,t,a){console.log(a)}})},100)})});